# Integrate Mergin Maps
[[toc]]

Do you want to integrate <MainPlatformNameLink />? <MainPlatformName /> is an open platform that aims to be developer friendly and it has been designed to allow easy integration with other software.


## Python client module
The Python client module is the easiest way to programmatically use <MainPlatformNameLink />. You can use Python API or a command-line tool to easily work with <MainPlatformName /> projects, such as to get project status, push and pull changes, or to download, create and delete projects.

The <GitHubRepo id="MerginMaps/python-api-client" /> repository contains the source code of the Python client module and more information on how to use it.

Python client is available in the PyPI repository and can be installed with `pip`:

```
pip3 install mergin-client
```

### Python module 
To use <MainPlatformNameLink /> from Python, just create `MerginClient` object and then use it. Here, for instance, to download a project:

```python
import mergin

client = mergin.MerginClient(login='john', password='T0p_secret')
client.download_project('lutraconsulting/Basic survey', '/tmp/basic-survey')
```
If you have <QGISPluginName /> installed and you want to use it from the QGIS' Python console

```python
import Mergin.mergin as mergin
client = mergin.MerginClient(login='john', password='T0p_secret')
```

#### User and roles management
You can create new users and manage their permissions using the following methods:

##### Create a user
```python
client.create_user(<email>, <password>, <workspace_id>, <workspace_role>, [username], [notify_user])
```
Arguments:
`email` (str): Must be a unique email
`passoword` (str): Must meet security requirements.
`workspace_id` (int): The workspace ID where the user will be added.
`workspace_role`(str): The userâ€™s role in the workspace. [See the roles options](../manage/permissions.md)
`username` (str, optional): Custom username; autogenerated if not provided.
`notify_user` (bool, optional): Flag for email notifications (invitations, access requests etc.). Default is `False`

Example:
```python
client.create_user("jill@example.com", "T0p_secret", 1, "editor", notify_user=True)
```

##### Get a workspace member detail
```python
client.get_workspace_member(<workspace_id>, <user_id>)
```
Arguments:
`workspace_id` (int): The workspace ID used to retrieve the user's roles for the workspace and its projects.
`user_id` (int): ID of the user.

##### Get a list of workspace members
```python
client.list_workspace_members(<workspace_id>)
```
Arguments:
`workspace_id` (int): The workspace ID to list the members.

##### Update workspace role
```python
client.update_workspace_member(<workspace_id>, <user_id>, <workspace_role>, [reset_projects_roles])
```
Arguments:
`workspace_id` (int): Workspace ID where to update user's role.
`user_id` (int): User to be updated.
`workspace_role` (str): New role.
`reset_projects_roles` (bool, optional): Flag to remove all project specific roles.

##### Remove a user from a workspace
```python
client.remove_workspace_member(<workspace_id>, <user_id>)
```
Arguments:
`workspace_id` (int): Workspace ID from which to remove the user.
`user_id` (int): ID of the user to be removed.

##### Get a list of project collaborators
```python
client.list_project_collaborators(<project_id>)
```
Arguments:
`project_id` (str): Project ID to list the users.

##### Add a user to project
```python
client.add_project_collaborator(<project_id>, <user>, <project_role>)
```
Arguments:
`project_id` (str): Project ID to add the user.
`user` (str): Email or username of the user to be added to the project.
`project_role`: (str): Role of the user in the project.

##### Update project role
```python
client.update_project_collaborator(<project_id>, <user_id>, <project_role>)
```
Arguments:
`project_id` (str): Project ID in which the role will be updated.
`user_id` (int): ID of the user to update.
`project_role`: (str): New role.

Note:
The user must have a project role to update it. You create one using the previous method.

##### Update project role
```python
client.remove_project_collaborator(<project_id>, <user_id>)
```
Arguments:
`project_id` (str): Project ID to remove the user.
`user_id` (int): ID of the user to remove from the project.


### Python command line interface
For those who prefer using terminal, there is `mergin` command line tool shipped with the Python client. With several built-in commands, it is possible to download <MainPlatformName /> projects, push/pull changes, create or delete projects and more.

For example, to download a <MainPlatformName /> project to a local folder:
```
mergin download john/project1 ~/mergin/project1
```
For more details, visit <GitHubRepo id="MerginMaps/python-api-client" />.

## C++ standalone client
C++ Client has advantage over Python that it is completely without any dependencies. 

To install the C++ client, just download the binary for your platform from <GitHubRepo id="MerginMaps/cpp-api-client/releases"/> and use it from the command line.

Go to <GitHubRepo id="MerginMaps/cpp-api-client" /> repository for more information on how to use it.

### C++ Command line tool
When the client is installed, it comes with `mergin` command line tool.

```bash 
$ mergin --help
Usage: mergin [OPTIONS] COMMAND [ARGS]...

Options:  
  --help      Show this message and exit.
  --version   Show the version information.
  --username  Mergin username (or MERGIN_USERNAME env. variable)
  --password  Mergin password (or MERGIN_PASSWORD env. variable)
  --url       Mergin url      (defaults to app.merginmaps.com)

Commands:
  create         Create a new project on Mergin server
  download       Download last version of mergin project
  sync           Pull&Push the changes
  remove         Remove project from server.
```

### C++ Mergin Maps API core library 

Client is based on the Qt-based <GitHubRepo id="MerginMaps/mobile/tree/master/core" desc="Mergin Maps API core library" /> used by the <MainDomainNameLink desc="Mergin Maps mobile app" /> to sync the projects in the mobile application.
